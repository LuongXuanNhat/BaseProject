@using BaseProject.ViewModels.Common;
@model PagedResult<BaseProject.ViewModels.Catalog.Post.PostVm>
@{
    ViewData["Title"] = "Đánh giá của tôi";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    @if (ViewBag.SuccessMsg != null)
    {
        <div id="msgAlert" class="alert alert-success" role="alert">
            @ViewBag.SuccessMsg
        </div>
    }
</div>



@*XÓA BÀi Viết*@
@*<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="post-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="post-modal-label">Xóa bài đăng</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Bạn có chắc chắn muốn xóa bài đăng này?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="cancel()">Hủy</button>
                <button type="button" class="btn btn-danger" id="deleteButton">Xóa</button>
            </div>
        </div>
    </div>
</div>*@

<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="​Book your outdoor adventure, About Us, ​Find your next getaway, Our Services, ​Plan Your Camping Trip, ​How to plan a camping trip, Contact Us">
    <meta name="description" content="">
    <title>ListPost</title>

    <link href="~/css/nicepage.css" rel="stylesheet" />
    <link href="~/css/listpost.css" rel="stylesheet" />
    <script src="~/js/jquery.js"></script>
    <script src="~/js/nicepage.js"></script>

    <meta name="generator" content="Nicepage 5.9.10, nicepage.com">

    <meta name="referrer" content="origin">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">

    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="ListPost">
    <meta property="og:type" content="website">
    <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>
<body class="u-body u-xl-mode" data-lang="en">

    <section class="u-clearfix u-section-10" id="sec-9e76">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-container-style u-group u-shape-rectangle u-group-1">
                <div class="u-container-layout u-container-layout-1">
                    <form action="#" method="get" class="u-border-1 u-border-grey-30 u-radius-21 u-search u-search-left u-white u-search-1">
                        <button class="u-search-button" type="submit">
                            <span class="u-search-icon u-spacing-10 u-search-icon-1">
                                <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 56.966 56.966"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-a3b5"></use></svg>
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-a3b5" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" class="u-svg-content"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path></svg>
                            </span>
                        </button>
                        <input class="u-search-input u-search-input-1" type="search" name="search" value="" placeholder="Tìm kiếm bài đánh giá">
                    </form>
                    <a href="https://nicepage.com/c/gallery-html-templates" class="u-border-1 u-border-palette-1-light-1 u-btn u-btn-round u-button-style u-palette-1-light-3 u-radius-6 u-text-palette-1-dark-2 u-btn-1">
                        Chọn danh mục&nbsp;&nbsp;<span class="u-file-icon u-icon"><img src="images/60781.png" alt=""></span>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section class="skrollable skrollable-between u-align-center u-clearfix u-container-align-center-md u-container-align-center-sm u-container-align-center-xs u-section-1" src="" id="sec-804d">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
                <div class="u-layout">
                    <div class="u-layout-row">
                        <div class="u-container-style u-layout-cell u-size-40 u-layout-cell-1">
                            <div class="u-container-layout u-valign-top u-container-layout-1">
                                <div class="u-container-style u-group u-shape-rectangle u-group-1">
                                    <div class="u-container-layout u-container-layout-2">
                                        @*list post ở đây*@
                                        @foreach (var item in Model.Items)
                                        {
                                            <div class="u-container-style u-expanded-width u-group u-shape-rectangle u-group-2">
                                                <div class="u-container-layout u-container-layout-3">
                                                    <div class="u-container-style u-group u-shape-rectangle ">
                                                        <img class="u-image-1" width="1280" height="853" src="" alt="">
                                                    </div>
                                                    <a style="color:black;text-decoration:none" href="@Url.Action("Details", new { id = item.PostId })">
                                                        <h5 class="u-text u-text-default u-text-1">@Html.DisplayFor(modelItem => item.Title)</h5>
                                                    </a>
                                                    <p class="u-text u-text-2">
                                                        <span class="u-file-icon u-icon u-icon-1"><img src="~/images/icon/date.png" alt=""></span>&nbsp;@Html.DisplayFor(modelItem => item.Date)&nbsp;
                                                        <span class="u-file-icon u-icon u-icon-2"><img src="~/images/icon/like.png" alt=""></span>&nbsp;like &nbsp;
                                                        <span class="u-file-icon u-icon u-icon-3"><img src="~/images/icon/eye.png" alt=""></span>&nbsp;@Html.DisplayFor(modelItem => item.View) &nbsp;
                                                        <span class="u-file-icon u-icon u-icon-4"><img src="~/images/icon/comment.png" alt=""></span>&nbsp;comment &nbsp;
                                                        <span class="u-file-icon u-icon u-icon-5"><img src="~/images/icon/category.png" alt=""></span>&nbsp;category
                                                    </p>
                                                    <p class="u-text u-text-3">
                                                        Nội dung giới hạn chữ<br>....
                                                    </p>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>

                                @*phân trang chưa làm*@
                                <div class="u-container-style u-group u-shape-rectangle u-group-4">
                                    <div class="u-container-layout u-container-layout-5">
                                        <p class="u-text u-text-default u-text-4">Phân trang ở đay</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="u-container-style u-hidden-md u-hidden-sm u-hidden-xs u-layout-cell u-shape-rectangle u-size-20 u-layout-cell-2">
                            <div class="u-container-layout u-valign-top u-container-layout-6">
                                <div class="u-border-2 u-border-palette-4-dark-2 u-container-style u-group u-shape-rectangle u-group-5">
                                    <div class="u-container-layout u-container-layout-7">
                                        <h5 class="u-text u-text-default u-text-5">
                                            <span class="u-file-icon u-icon u-icon-6"><img src="~/images/icon/topuser.png" alt=""></span>&nbsp;SIÊU SAO REVIEW
                                        </h5>
                                        @*top user ở đây*@
                                        <div class="u-list u-list-1">
                                            <div class="u-repeater u-repeater-1">
                                                <div class="u-container-style u-list-item u-repeater-item">
                                                    <div class="u-container-layout u-similar-container u-container-layout-8">
                                                        <p class="u-text u-text-default u-text-6">
                                                            <span class="u-file-icon u-icon"><img src="~/images/icon/1.png" alt=""></span>
                                                        </p>
                                                        <p class="u-text u-text-7">
                                                            <span class="u-icon u-icon-8"></span>
                                                            <span style="font-family: Montserrat,sans-serif; font-weight: 400; background-color: #ffffff; color: #111111;">Luong Xuan Nhi</span>
                                                        </p>
                                                        <p class="u-text u-text-default u-text-8">xxx lượt theo dõi</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="u-border-2 u-border-palette-5-base u-container-style u-group u-shape-rectangle u-group-6">
                                    <div class="u-container-layout u-container-layout-9">
                                        <h5 class="u-text u-text-default u-text-9">
                                            <span class="u-file-icon u-icon u-icon-9"><img src="~/images/icon/topreview.png" alt=""></span>&nbsp;ĐỌC NHIỀU NHẤT
                                        </h5>

                                        @*top post ở đây*@
                                        <div class="u-container-style u-group u-shape-rectangle u-group-7">
                                            <div class="u-container-layout u-container-layout-10">
                                                <p class="u-text u-text-10">top 5 địa điểm ngắm khinh khí cầu đẹp mắt còn sang chảnh tại Huế</p>
                                                <p class="u-text u-text-default u-text-palette-1-base u-text-11">
                                                    <span class="u-file-icon u-icon u-icon-10"><img src="~/images/icon/1.png" alt=""></span>&nbsp;​&nbsp;​&nbsp;
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="u-align-center u-clearfix u-white u-section-2" id="sec-eb08">
        <div class="u-clearfix u-sheet u-sheet-1">
            <h3 class="u-align-center u-text u-text-default u-text-1" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="0">Địa điểm nổi bật</h3>
            <p class="u-align-center u-text u-text-2" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="250">Sự tuyệt vời của những nơi này sẽ không làm bạn thất vọng, hãy chuẩn bị tâm thái để có một chuyến đi thật vui vẻ</p>
            <div class="u-list u-list-1">
                <div class="u-repeater u-repeater-1">
                    <div class="u-align-center u-container-align-center u-container-style u-image u-list-item u-repeater-item u-shading u-shape-rectangle u-image-1" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="500" data-image-width="800" data-image-height="533">
                        <div class="u-container-layout u-similar-container u-valign-bottom u-container-layout-1">
                            <div class="u-black u-container-align-center u-container-style u-expanded-width u-group u-opacity u-opacity-50 u-group-1" data-animation-name="pulse" data-animation-duration="1500" data-animation-direction="" data-animation-delay="500">
                                <div class="u-container-layout u-valign-middle u-container-layout-2">
                                    <h4 class="u-align-center u-text u-text-3" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500"> Best RV camping</h4>
                                    <p class="u-align-center u-text u-text-4" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500">Sample text. Click to select the Text Element.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-align-center u-container-align-center u-container-style u-image u-list-item u-repeater-item u-shading u-shape-rectangle u-image-2" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="500" data-image-width="800" data-image-height="533">
                        <div class="u-container-layout u-similar-container u-valign-bottom u-container-layout-3">
                            <div class="u-black u-container-style u-expanded-width u-group u-opacity u-opacity-50 u-group-2" data-animation-name="pulse" data-animation-duration="1500" data-animation-direction="" data-animation-delay="500">
                                <div class="u-container-layout u-valign-middle u-container-layout-4">
                                    <h4 class="u-align-center u-text u-text-5" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500"> Lake camping</h4>
                                    <p class="u-align-center u-text u-text-6" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500">Sample text. Click to select the Text Element.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-align-center u-container-align-center u-container-style u-image u-list-item u-repeater-item u-shading u-shape-rectangle u-image-3" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="500" data-image-width="626" data-image-height="533">
                        <div class="u-container-layout u-similar-container u-valign-bottom u-container-layout-5">
                            <div class="u-black u-container-align-center u-container-style u-expanded-width u-group u-opacity u-opacity-50 u-group-3" data-animation-name="pulse" data-animation-duration="1500" data-animation-direction="" data-animation-delay="500">
                                <div class="u-container-layout u-valign-middle u-container-layout-6">
                                    <h4 class="u-align-center u-text u-text-7" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500"> Beach stays</h4>
                                    <p class="u-align-center u-text u-text-8" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500">Sample text. Click to select the Text Element.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-align-center u-container-align-center u-container-style u-image u-list-item u-repeater-item u-shading u-shape-rectangle u-image-4" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="500" data-image-width="740" data-image-height="925">
                        <div class="u-container-layout u-similar-container u-valign-bottom u-container-layout-7">
                            <div class="u-black u-container-style u-expanded-width u-group u-opacity u-opacity-50 u-group-4" data-animation-name="pulse" data-animation-duration="1500" data-animation-direction="" data-animation-delay="500">
                                <div class="u-container-layout u-valign-middle u-container-layout-8">
                                    <h4 class="u-align-center u-text u-text-9" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500"> Backyard Camping</h4>
                                    <p class="u-align-center u-text u-text-10" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500">Sample text. Click to select the Text Element.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-align-center u-container-align-center u-container-style u-image u-list-item u-repeater-item u-shading u-shape-rectangle u-image-5" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="500" data-image-width="740" data-image-height="925">
                        <div class="u-container-layout u-similar-container u-valign-bottom u-container-layout-9">
                            <div class="u-black u-container-style u-expanded-width u-group u-opacity u-opacity-50 u-group-5" data-animation-name="pulse" data-animation-duration="1500" data-animation-direction="" data-animation-delay="500">
                                <div class="u-container-layout u-valign-middle u-container-layout-10">
                                    <h4 class="u-align-center u-text u-text-11" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500"> car camping</h4>
                                    <p class="u-align-center u-text u-text-12" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500">Sample text. Click to select the Text Element.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-align-center u-container-align-center u-container-style u-image u-list-item u-repeater-item u-shading u-shape-rectangle u-image-6" data-animation-name="customAnimationIn" data-animation-duration="1500" data-animation-delay="500" data-image-width="740" data-image-height="925">
                        <div class="u-container-layout u-similar-container u-valign-bottom u-container-layout-11">
                            <div class="u-black u-container-style u-expanded-width u-group u-opacity u-opacity-50 u-group-6" data-animation-name="pulse" data-animation-duration="1500" data-animation-direction="" data-animation-delay="500">
                                <div class="u-container-layout u-valign-middle u-container-layout-12">
                                    <h4 class="u-align-center u-text u-text-13" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500"> Wilderness Camping</h4>
                                    <p class="u-align-center u-text u-text-14" data-animation-name="customAnimationIn" data-animation-duration="1250" data-animation-delay="500">Sample text. Click to select the Text Element.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    @await Component.InvokeAsync("Pager", Model)
</body>
</html>

@section Scripts{
    <script>
        setTimeout(function () {
            $('#msgAlert').fadeOut('slow');
        }, 2000);
    </script>

    <!-- Gọi mã javascript để hiển thị modal và xóa bài đăng -->
    <script>
        var token = '@Html.Raw(ViewBag.Token)';
        var a = @Model.Items.Count;


        function showDeleteModal(id) {
            $('#deleteModal').modal('show');
            $('#deleteButton').attr('data-id', id);

        }


        $('#deleteButton').click(function () {
            var id = $(this).attr('data-id');

            $.ajax({
                url: 'https://localhost:7204/api/post/' + id,
                type: 'DELETE',
                headers: { Authorization: 'Bearer ' + token },
                success: function (data) {
                    $('#deleteModal').modal('hide');
                    alert('Xóa thành công');
                    loadPosts();

                },
                error: function () {
                    alert('Có lỗi xảy ra khi xóa');
                }
            });
        });
        var LoadPage = window.location;
        function loadPosts() {
            LoadPage.reload(true);
        }

        function cancel() {
            $('#deleteModal').modal('hide');
        }
    </script>


}
